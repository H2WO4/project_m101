<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö¶ CityFlow Analytics - Dashboard Temps R√©el</title>
    
    <!-- Leaflet CSS for OpenStreetMap -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="cityflow-dashboard.css" />
</head>
<body>
    <div class="header">
        <div class="logo">
            üö¶ CityFlow Analytics
        </div>
        <div class="connection-status">
            <div class="status-indicator" id="statusIndicator"></div>
            <span id="statusText">Connect√© au serveur</span>
        </div>
    </div>

    <div class="main-container">
        <!-- Section Carte -->
        <div class="map-section">
            <div class="map-overlay">
                <h3>L√©gende</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: #22c55e;"></div>
                    <span>Fluide (&lt; 30 km/h)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #fbbf24;"></div>
                    <span>Dense (30-50 km/h)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ef4444;"></div>
                    <span>Embouteill√© (&gt; 50 km/h)</span>
                </div>
            </div>
            <div class="prediction-badge" id="predictionBadge">
                üîÆ Pr√©diction: Embouteillage dans 25 min
            </div>
            <div id="map"></div>
        </div>

        <!-- Panneau Droit -->
        <div class="right-panel">
            <!-- Stats en temps r√©el -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">V√©hicules Actifs</div>
                    <div class="stat-value">
                        <span id="vehicleCount">0</span>
                    </div>
                    <div class="stat-trend trend-up" id="vehicleTrend">
                        ‚Üë +12%
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Vitesse Moyenne</div>
                    <div class="stat-value">
                        <span id="avgSpeed">0</span>
                        <span class="stat-unit">km/h</span>
                    </div>
                    <div class="stat-trend trend-down" id="speedTrend">
                        ‚Üì -8%
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">√âmissions CO‚ÇÇ</div>
                    <div class="stat-value">
                        <span id="emissions">0</span>
                        <span class="stat-unit">kg</span>
                    </div>
                    <div class="stat-trend trend-down" id="emissionsTrend">
                        ‚Üì -23%
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Temps Gain Moyen</div>
                    <div class="stat-value">
                        <span id="timeSaved">0</span>
                        <span class="stat-unit">min</span>
                    </div>
                    <div class="stat-trend trend-up" id="timeTrend">
                        ‚Üë +15%
                    </div>
                </div>
            </div>

            <!-- Graphique Trafic -->
            <div class="chart-container">
                <div class="chart-title">üìä Densit√© de Trafic (30 derni√®res minutes)</div>
                <svg id="trafficChart"></svg>
            </div>

            <!-- Graphique √âmissions -->
            <div class="chart-container">
                <div class="chart-title">üå± R√©duction d'√âmissions</div>
                <svg id="emissionsChart"></svg>
            </div>

            <!-- Alertes -->
            <div class="alerts-container">
                <div class="chart-title">‚ö†Ô∏è Alertes & Pr√©dictions</div>
                <div id="alertsList"></div>
            </div>
        </div>
    </div>

    <!-- Libraries -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- Dashboard Client Script -->
    <script src="/dist/dashboard.js"></script>
</body>
</html>
